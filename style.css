/* Removido: @import url('...'); - Fontes são carregadas no HTML */

:root {
    --bg-main: #101419;
    --bg-panel: #1c2128;
    --border-color: #30363d;
    --text-primary: #e6edf3;
    --text-secondary: #7d8590;
    --accent-color: #f1b30a;
    --color-positive: #2da44e;
    --color-negative: #cf222e;
}

/* --- Ajustes Globais e de Layout --- */
html, body {
    height: 100vh; /* Usa a altura total da janela */
    overflow: hidden; /* Evita barras de rolagem desnecessárias */
    margin: 0; /* Garante sem margens */
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Inter', sans-serif; /* Fonte carregada via HTML */
    background-color: var(--bg-main);
    color: var(--text-primary);
    font-size: 14px;
    display: flex;
    height: 100vh;
    overflow: hidden;
}

.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 25px;
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

.title-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    flex-shrink: 0;
}

.logo-img {
    height: 40px;
    width: auto;
}

h1 {
    text-align: center;
    color: var(--accent-color);
    font-weight: 500;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 0;
}

h2 {
    font-weight: 500;
    color: var(--text-primary);
    font-size: 1.1em;
}

.hidden {
    display: none !important;
}

/* --- Estilos do Setup --- */
#setup {
    text-align: center;
    padding: 20px 0;
    flex-shrink: 0;
}

.setup-group {
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
}

.settings-grid {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.input-group {
    display: flex;
    flex-direction: column;
    text-align: center;
    width: 120px;
}

.input-group label {
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: 5px;
}

.input-group input {
    padding: 10px;
    font-size: 16px;
    width: 100%;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    background-color: var(--bg-main);
    color: var(--text-primary);
    text-align: center;
}

input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type=number] {
    -moz-appearance: textfield;
}

.select-wrapper {
    position: relative;
    display: inline-block;
}

.select-wrapper::after {
    content: '▼';
    font-size: 12px;
    color: var(--text-secondary);
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
}

#symbol-select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    padding: 10px 40px 10px 15px;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    background-color: var(--bg-panel);
    color: var(--text-primary);
    cursor: pointer;
}

#start-button, 
.run-button {
    cursor: pointer;
    background-color: var(--accent-color);
    border: 1px solid var(--accent-color);
    color: var(--bg-main);
    font-weight: 600;
    transition: background-color 0.2s ease;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 6px;
}

#start-button:hover, .run-button:hover {
    background-color: #ffdf4d;
}
.run-button:disabled {
    background-color: var(--border-color);
    border-color: var(--border-color);
    color: var(--text-secondary);
    cursor: not-allowed;
}

#open-testing-button:hover {
    background-color: var(--border-color); /* Um pouco mais claro no hover */
}

.toggle-container {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.toggle-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    color: var(--text-secondary);
    width: 140px;
    text-align: center;
    font-size: 13px;
}

.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #30363d;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
}

input:checked + .slider {
    background-color: var(--accent-color);
}

input:checked + .slider:before {
    transform: translateX(22px);
}

.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}

/* --- Estilos do Dashboard (COM LAYOUT VERTICAL CORRIGIDO) --- */
#dashboard {
    flex-grow: 1; /* Ocupa o espaço RESTANTE no .container */
    display: flex;
    flex-direction: column; /* Empilha as linhas de painéis */
    min-height: 0; /* ESSENCIAL */
    gap: 20px; /* Espaço ENTRE as linhas */
    overflow: hidden; /* Garante que nada vaze */
}

.panel-container {
    display: flex; /* Linha de painéis */
    gap: 20px; /* Espaço ENTRE painéis na mesma linha */
    min-height: 0; /* Essencial para filhos flex */
    align-items: stretch; /* Filhos (painéis) devem esticar */
}

/* --- CONTROLE EXPLÍCITO DAS LINHAS --- */
.panel-container:first-child {
    flex-grow: 0; /* PRIMEIRA LINHA NÃO CRESCE VERTICALMENTE */
    flex-shrink: 0; /* PRIMEIRA LINHA NÃO ENCOLHE VERTICALMENTE */
    /* Altura será definida pelo conteúdo */
}

.panel-container:last-child {
    flex-grow: 1; /* SEGUNDA LINHA PEGA TODO O ESPAÇO RESTANTE */
    min-height: 0; /* ESSENCIAL */
    /* align-items: stretch; Já está na regra .panel-container geral */
}
/* --- FIM DO CONTROLE EXPLÍCITO --- */


.panel {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    flex: 1; /* Painéis dividem espaço HORIZONTALMENTE */
    display: flex;
    flex-direction: column;
    min-height: 0; /* ESSENCIAL para conteúdo interno crescer/encolher */
    overflow: hidden; /* Garante que conteúdo interno não vaze */
}

/* Garante que o CONTEÚDO dentro dos painéis possa crescer e rolar */
#status-content,
.portfolio-content, /* Usando a classe adicionada no HTML */
.chart-container,
#logs {
    flex-grow: 1; /* Permite crescer para preencher o painel */
    min-height: 0; /* Permite encolher se necessário */
    overflow: auto; /* Adiciona scroll SE necessário DENTRO dessas áreas */
    display: flex; /* Necessário para usar margin-top: auto nos filhos */
    flex-direction: column; /* Empilha o conteúdo */
}

/* Exceções: Gráfico e Status não devem rolar internamente */
.chart-container,
#status-content {
    overflow: hidden;
}

/* Logs devem rolar */
#logs {
    overflow-y: auto;
}


/* Elementos que NÃO devem crescer ou encolher desnecessariamente */
.panel-header,
hr { /* Removido .data-point daqui */
    flex-shrink: 0;
}
/* .price-container e #action-button já têm flex-shrink:0 abaixo */


/* Ajustes específicos para painéis (proporção horizontal) */
#chart-panel {
    flex: 2.5;
}

#log-panel {
    flex: 1.5;
}

/* --- Ajustes de Alinhamento Interno dos Painéis --- */
.data-point {
    display: flex;
    align-items: center;
    padding: 8px 0;
    font-size: 14px;
    flex-shrink: 0; /* Garante que os data-points não sejam espremidos */
}

.data-point .label {
    color: var(--text-secondary);
    margin-right: 1em; /* Mantém o espaço */
    white-space: nowrap;
    flex-shrink: 0; /* Impede o label de encolher */
}

.data-point .value {
    color: var(--text-primary);
    font-weight: 500;
    text-align: right; /* Mantém texto à direita */
    flex-grow: 1; /* Faz o valor ocupar o espaço restante */
    min-width: 0; /* Permite encolher se necessário */
}

/* Garante alinhamento específico para o ícone/nome do ativo */
.asset-display {
    display: flex;
    align-items: center;
    justify-content: flex-end; /* Alinha o conteúdo (ícone + texto) à direita */
    gap: 8px;
    flex-grow: 1; /* Ocupa espaço */
}

/* Limita o tamanho do ícone da criptomoeda */
#asset-icon {
    width: 24px;   /* Define uma largura fixa */
    height: 24px;  /* Define uma altura fixa */
    object-fit: contain; /* Garante que a imagem caiba sem distorcer */
    flex-shrink: 0; /* Impede o ícone de encolher */
}

/* Ajuste Fino no `.price-container` (Dentro do Status) */
.price-container {
    margin-top: auto; /* EMPURRA PARA BAIXO */
    padding-top: 15px;
    flex-shrink: 0;
    text-align: right; /* Alinha todo o conteúdo à direita */
}

.price-container .label {
    font-size: 1em;
    color: var(--text-secondary);
    display: block; /* Garante que fique em linha separada */
    margin-right: 0; /* Remove margem desnecessária herdada */
}

.price-value {
    font-size: 2.5em;
    font-weight: 700;
    /* text-align: right; <-- Removido daqui, já está no pai */
    transition: color 0.3s ease;
}

/* Força o Chart.js a respeitar o container */
.chart-container canvas {
    display: block; /* Remove espaço extra abaixo do canvas */
    max-width: 100%;
    max-height: 100%;
    height: 100% !important; /* Força altura */
    width: 100% !important; /* Força largura */
}


/* Estilos dos logs */
#logs {
    background-color: #010409;
    padding: 15px;
    border-radius: 6px;
    font-family: "SF Mono", "Courier New", Courier, monospace;
    font-size: 13px;
    display: flex;
    flex-direction: column-reverse; /* Logs mais recentes em cima */
}

#logs::-webkit-scrollbar {
    width: 8px;
}
#logs::-webkit-scrollbar-track {
    background: var(--bg-main);
}
#logs::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}
#logs::-webkit-scrollbar-thumb:hover {
    background: #555;
}
#logs p {
    margin-top: 5px;
    white-space: pre-wrap;
}
.log-default { color: var(--text-secondary); }
.log-buy { color: #58a6ff; }
.log-sell-profit { color: var(--color-positive); }
.log-sell-loss { color: var(--color-negative); }
.log-error { color: var(--color-negative); font-weight: bold; }

/* Indicadores de preço e lucro */
.positive { color: var(--color-positive) !important; }
.negative { color: var(--color-negative) !important; }

/* Botão de Ação (Parar/Liquidar/Reiniciar) */
#action-button {
    margin-top: auto; /* Empurra para baixo DENTRO do .portfolio-content */
    padding: 10px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0; /* NÃO ENCOLHE */
}
#action-button.liquidate {
    border: 1px solid var(--color-negative);
    background-color: transparent;
    color: var(--color-negative);
}
#action-button.liquidate:hover {
    background-color: var(--color-negative);
    color: var(--text-primary);
}
#action-button.stop {
    border: 1px solid var(--accent-color);
    background-color: transparent;
    color: var(--accent-color);
}
#action-button.stop:hover {
    background-color: var(--accent-color);
    color: var(--bg-main);
}
#action-button.restart {
    border: 1px solid #58a6ff;
    background-color: transparent;
    color: #58a6ff;
}
#action-button.restart:hover {
    background-color: #58a6ff;
    color: var(--bg-main);
}

/* --- Estilos Específicos para testing.html --- */

/* Garante que o body da janela de teste possa ter scroll */
body.testing-window {
    display: block; /* Remove o display flex herdado */
    height: auto;
    min-height: 100vh; /* Garante altura mínima */
    overflow-y: auto; /* Permite scroll vertical */
}

/* Ajusta o container principal na janela de teste */
.testing-window .container {
    max-width: 950px; /* Ou o tamanho que preferir */
    height: auto;
    overflow: visible; /* Remove overflow hidden herdado */
    flex-direction: column; /* Garante empilhamento vertical */
    padding-top: 20px;
    padding-bottom: 40px; /* Mais espaço no fundo */
}

/* Ajusta o título principal */
.testing-window h1 {
    font-size: 1.8em; /* Um pouco maior talvez */
    margin-bottom: 30px;
}


/* Estilo base das secções de teste */
.test-section {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 25px;
    margin-bottom: 30px; /* Mais espaço entre secções */
    box-shadow: 0 3px 6px rgba(0,0,0,0.1); /* Sombra suave */
}

/* Títulos das secções (H3) */
.test-section h3 {
    color: var(--accent-color);
    margin: 0 0 15px 0; /* Remove margem de cima */
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border-color);
    font-weight: 500;
    font-size: 1.3em;
}

/* Descrição abaixo do título */
.test-section p {
    font-size: 14px; /* Tamanho um pouco maior */
    color: var(--text-secondary);
    margin-bottom: 25px; /* Mais espaço antes dos inputs */
    line-height: 1.5;
}

/* Linha de formulário */
.form-row {
    display: flex;
    gap: 25px; /* Espaço entre grupos na mesma linha */
    margin-bottom: 20px;
    align-items: flex-end; /* Alinha pela base */
    flex-wrap: wrap; /* Permite quebrar linha se não couber */
}

/* Grupo Label + Input */
.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px; /* Espaço entre label e input */
}

.form-group label {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500; /* Leve negrito */
}

/* Estilo consistente para inputs e select */
.form-group input[type="date"],
.form-group input[type="number"],
.form-group select {
    padding: 10px 12px; /* Mais padding */
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    background-color: var(--bg-main); /* Fundo mais escuro */
    color: var(--text-primary);
    min-width: 180px; /* Largura mínima */
}
/* Placeholder para date input */
input[type="date"]::-webkit-input-placeholder { color: var(--text-secondary); }
input[type="date"]::-moz-placeholder { color: var(--text-secondary); opacity: 1; }
input[type="date"]:-ms-input-placeholder { color: var(--text-secondary); }
input[type="date"]::placeholder { color: var(--text-secondary); }


/* Área de resultados */
.results-area h4 {
    margin-bottom: 10px;
    font-weight: 600;
}

.results-area pre {
    background-color: #010409;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 15px;
    font-family: "SF Mono", "Courier New", Courier, monospace;
    font-size: 13px;
    color: #c9d1d9; /* Cor ligeiramente diferente para o texto do resultado */
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 400px;
    overflow-y: auto;
}

/* Span de Status (ao lado do botão) */
#oos-status {
     margin-left: 15px;
     font-style: italic;
     color: var(--text-secondary);
     line-height: 38px; /* Alinha verticalmente com o botão (ajustar padding do botão se necessário) */
}

/* Área de Logs de Teste */
#testing-logs {
     background-color: #010409;
     border: 1px solid var(--border-color);
     border-radius: 6px;
     padding: 15px;
     min-height: 150px;
     max-height: 350px; /* Aumenta um pouco a altura máxima */
     overflow-y: auto;
     font-family: "SF Mono", "Courier New", Courier, monospace;
     font-size: 13px;
     color: var(--text-secondary);
     display: flex;
     flex-direction: column-reverse;
     margin-top: 10px; /* Espaço acima */
}
#testing-logs p { margin-top: 5px; white-space: pre-wrap; line-height: 1.4; }
.log-default { color: var(--text-secondary); }
.log-info { color: #58a6ff; } /* Azul para info */
.log-success { color: var(--color-positive); } /* Verde para sucesso */
.log-error { color: var(--color-negative); font-weight: bold; } /* Vermelho para erro */

.testing-html,
.testing-window {
    overflow: auto !important; /* Força o scroll a ser permitido */
    height: auto; /* Remove altura fixa se houver */
    min-height: 100%; /* Garante que o body possa crescer */
}

/* Garante que o container não restrinja a altura desnecessariamente */
.testing-window .container {
    min-height: 100vh; /* O container deve ter pelo menos a altura da janela */
    height: auto;      /* Mas pode crescer mais */
    overflow: visible; /* Mantém como estava */
}